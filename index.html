<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SE7EN | CORE VIEW</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --accent: #FF4500;
            --bg: #0f0f0f;
            --surface: #1a1a1a;
            --text: #ffffff;
            --text-dim: #aaaaaa;
        }

        * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', sans-serif; }
        html { scroll-behavior: smooth; }
        body { background: var(--bg); color: var(--text); display: flex; flex-direction: column; min-height: 100vh; transition: 0.3s; }
        body.light { background: #f5f5f5; color: #111; --surface: #ffffff; --text: #111; }

        /* HEADER */
        .header { display: flex; flex-direction: column; gap: 12px; padding: 15px; background: #111; position: sticky; top: 0; z-index: 10; border-bottom: 1px solid #222; }
        .title { font-size: 24px; font-weight: 700; text-align: center; letter-spacing: 5px; text-transform: uppercase; cursor: pointer; }
        .title span { color: var(--accent); }
        .status-dot { display: inline-block; width: 8px; height: 8px; background: #43b581; border-radius: 50%; margin-left: 5px; box-shadow: 0 0 10px #43b581; }

        .theme-toggle { position: absolute; top: 15px; right: 15px; padding: 5px 12px; background: var(--accent); color: white; border: none; border-radius: 15px; cursor: pointer; font-size: 11px; font-weight: 700; }

        /* SEARCH */
        .search-box { display: flex; gap: 10px; width: 100%; max-width: 600px; margin: 0 auto; }
        .search-box input { flex: 1; padding: 10px 20px; border-radius: 25px; border: 1px solid #333; background: #1c1c1c; color: white; outline: none; }
        .search-box button { padding: 10px 20px; border: none; border-radius: 25px; background: var(--accent); color: white; cursor: pointer; font-weight: 600; }

        /* BARS */
        .channel-bar, .category-bar { display: flex; gap: 8px; overflow-x: auto; padding: 5px 0; scrollbar-width: none; }
        .channel-bar::-webkit-scrollbar, .category-bar::-webkit-scrollbar { display: none; }
        
        .channel-btn, .category-btn { padding: 7px 15px; background: #222; border: 1px solid #333; color: white; border-radius: 20px; cursor: pointer; font-size: 12px; white-space: nowrap; transition: 0.2s; }
        .category-btn:hover, .channel-btn:hover { border-color: var(--accent); transform: translateY(-2px); }
        .active-category { background: var(--accent) !important; border-color: var(--accent); }

        /* GRID */
        .results { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; padding: 20px; flex: 1; }
        .video-card { background: var(--surface); border-radius: 15px; overflow: hidden; cursor: pointer; transition: 0.3s; position: relative; border: 1px solid #222; }
        .video-card:hover { transform: scale(1.02); border-color: var(--accent); box-shadow: 0 10px 20px rgba(0,0,0,0.4); }
        .video-card img { width: 100%; aspect-ratio: 16/9; object-fit: cover; display: block; }
        
        .preview-container { position: absolute; top: 0; left: 0; width: 100%; aspect-ratio: 16/9; display: none; pointer-events: none; }
        
        .video-info { padding: 12px; }
        .title-txt { font-size: 14px; font-weight: 600; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .author { font-size: 12px; color: var(--text-dim); margin-top: 6px; font-weight: 500; }

        /* LOADING SPINNER */
        #loader { text-align: center; padding: 50px; display: none; }
        .spinner { width: 40px; height: 40px; border: 4px solid #222; border-top-color: var(--accent); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* MODAL */
        #modal-player { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(8px); }
        .modal-content { position: relative; width: 95%; max-width: 1000px; background: #000; border-radius: 12px; overflow: hidden; border: 1px solid #333; }
        #player { width: 100%; aspect-ratio: 16/9; }
        .close-btn { position: absolute; top: 15px; right: 15px; background: rgba(255,69,0,0.8); border: none; color: white; width: 35px; height: 35px; border-radius: 50%; cursor: pointer; z-index: 10; font-weight: bold; }

        /* UTILS */
        .bmc-float { position: fixed; bottom: 20px; right: 20px; background: var(--accent); color: white; padding: 10px 18px; border-radius: 30px; display: flex; align-items: center; gap: 8px; font-weight: 700; font-size: 13px; text-decoration: none; z-index: 999; box-shadow: 0 5px 15px rgba(255,69,0,0.3); }
        #back-to-top { position: fixed; bottom: 80px; right: 20px; width: 45px; height: 45px; background: #333; color: white; border: none; border-radius: 50%; cursor: pointer; display: none; z-index: 999; font-size: 20px; }
        #back-to-top.show { display: block; }

        #qr-popup { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); justify-content: center; align-items: center; z-index: 2000; }
        .qr-card { background: #1a1a1a; padding: 30px; border-radius: 20px; text-align: center; border: 1px solid var(--accent); position: relative; }
        #qr-btn { position: fixed; bottom: 20px; left: 20px; padding: 10px 20px; background: #222; color: white; border: 1px solid #444; border-radius: 30px; cursor: pointer; font-size: 12px; z-index: 999; }

        @media(max-width: 600px) { .results { grid-template-columns: 1fr; } .title { font-size: 18px; } }
    </style>
</head>
<body id="top">

<button class="theme-toggle" onclick="toggleTheme()">MODE</button>

<header class="header">
    <h2 class="title" onclick="window.scrollTo({top:0, behavior:'smooth'})">SE<span>7</span>EN<div class="status-dot"></div></h2>
    
    <div class="search-box">
        <input type="text" id="search" placeholder="Search system core..." onkeyup="if(event.key==='Enter') searchVideos()">
        <button onclick="searchVideos()"><i class="fas fa-search"></i></button>
    </div>

    <div class="channel-bar" id="channels-buttons"></div>
    
    <div class="category-bar">
        <button class="category-btn active-category" onclick="filterCategory('all')">All Resources</button>
        <button class="category-btn" onclick="filterCategory('music')">Music</button>
        <button class="category-btn" onclick="filterCategory('gaming')">Gaming</button>
        <button class="category-btn" onclick="filterCategory('tech')">Tech & Dev</button>
        <button class="category-btn" onclick="filterCategory('news')">News</button>
        <button class="category-btn" onclick="filterCategory('learning')">Learning</button>
    </div>
</header>

<div id="loader"><div class="spinner"></div><p style="margin-top:10px; font-size:12px; color:var(--accent);">SYNCING CORE...</p></div>

<main id="results" class="results"></main>

<div id="modal-player">
    <div class="modal-content">
        <button class="close-btn" onclick="closePlayer()">&times;</button>
        <div id="player"></div>
    </div>
</div>

<footer style="background:#111; text-align:center; padding:30px; font-size:11px; color:#555; letter-spacing:2px;">
    &copy; 2026 SE7EN CORE SYSTEM | ENCRYPTED BY ALOY
</footer>

<a class="bmc-float" href="https://www.maya.ph/app/registration?invite=@gseven33" target="_blank">
    <i class="fas fa-bolt"></i> SUPPORT PROJECT
</a>

<button id="back-to-top" onclick="window.scrollTo({top:0, behavior:'smooth'})"><i class="fas fa-chevron-up"></i></button>
<button id="qr-btn" onclick="document.getElementById('qr-popup').style.display='flex'">SCAN QR</button>

<div id="qr-popup" onclick="if(event.target===this) this.style.display='none'">
    <div class="qr-card">
        <span style="position:absolute; top:10px; right:15px; cursor:pointer; font-size:24px;" onclick="document.getElementById('qr-popup').style.display='none'">&times;</span>
        <p style="margin-bottom:15px; color:var(--accent); font-weight:700;">SE7EN CORE DONATION</p>
        <img src="media/myqr_1765267416489.jpg" alt="QR Code" style="width:220px; border-radius:10px;">
    </div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
let player, allVideos=[], filteredVideos=[], currentCategory='all', currentVideoIndex=0;

const channels = [
    {id:'UC_x5XG1OV2P6uZZ5FSM9Ttw', name:'Google Devs'},
    {id:'UC29ju8bIPH5as8OGnQzwJyA', name:'Traversy Media'},
    {id:'UCWv7vMbMWH4-V0ZXdmDpPBA', name:'freeCodeCamp'},
    {id:'UCSJbGtTlrDami-tDGPUV9-w', name:'Mosh'},
    {id:'UCYO_jab_esuFRV4b17AJtAw', name:'3Blue1Brown'},
    {id:'UC1k9c0gJ1a1kDFG1V2B2GDA', name:'David Bombal'},
    {id:'UC9x0AN7BWHpCDHSm9NiJFJQ', name:'NetworkChuck'},
    {id:'UCVeW9qkBjo3zosnqUbG7CFw', name:'John Hammond'},
    {id:'UCJklo0Zl5tLV9kkk_Jd81EA', name:'Breaking Benjamin'}
];

// Initialize Channels
const chBox = document.getElementById('channels-buttons');
channels.forEach(ch => {
    const btn = document.createElement('button');
    btn.className = 'channel-btn';
    btn.innerText = ch.name;
    btn.onclick = () => loadChannel(ch.id);
    chBox.appendChild(btn);
});

async function loadChannel(channelId) {
    showLoader(true);
    try {
        const url = `https://api.rss2json.com/v1/api.json?rss_url=https://www.youtube.com/feeds/videos.xml?channel_id=${channelId}`;
        const res = await fetch(url);
        const data = await res.json();
        allVideos = processVideos(data.items || []);
        filteredVideos = allVideos;
        applyFilters();
    } catch(e) { console.error("Sync Error"); }
    showLoader(false);
}

async function loadAllChannels() {
    showLoader(true);
    allVideos = [];
    for(const ch of channels) {
        try {
            const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=https://www.youtube.com/feeds/videos.xml?channel_id=${ch.id}`);
            const data = await res.json();
            allVideos = allVideos.concat(processVideos(data.items || []));
        } catch(e) {}
    }
    filteredVideos = allVideos;
    applyFilters();
    showLoader(false);
}

function processVideos(items) {
    return items.map(v => {
        let t = v.title.toLowerCase();
        let category = 'other';
        if(t.includes('music') || t.includes('song') || t.includes('benjamin')) category = 'music';
        else if(t.includes('game') || t.includes('gaming')) category = 'gaming';
        else if(t.includes('tech') || t.includes('code') || t.includes('program')) category = 'tech';
        else if(t.includes('news')) category = 'news';
        else if(t.includes('learn') || t.includes('tutorial')) category = 'learning';
        return { ...v, category };
    });
}

function displayVideos(videos) {
    const results = document.getElementById('results');
    results.innerHTML = '';
    
    videos.forEach((v, index) => {
        const videoId = v.link.split('v=')[1] || v.link.split('/').pop();
        const card = document.createElement('div');
        card.className = 'video-card';
        card.innerHTML = `
            <img loading="lazy" src="${v.thumbnail}" />
            <div class="preview-container">
                <iframe class="preview-iframe" width="100%" height="100%" frameborder="0"></iframe>
            </div>
            <div class="video-info">
                <div class="title-txt">${v.title}</div>
                <div class="author">${v.author}</div>
            </div>
        `;

        card.onmouseenter = () => {
            const container = card.querySelector('.preview-container');
            const iframe = card.querySelector('.preview-iframe');
            iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&controls=0`;
            container.style.display = 'block';
        };
        card.onmouseleave = () => {
            const container = card.querySelector('.preview-container');
            const iframe = card.querySelector('.preview-iframe');
            iframe.src = '';
            container.style.display = 'none';
        };
        card.onclick = () => playVideoModal(index);
        results.appendChild(card);
    });
}

function applyFilters() {
    let query = document.getElementById('search').value.toLowerCase();
    let data = allVideos.filter(v => v.title.toLowerCase().includes(query));
    if(currentCategory !== 'all') data = data.filter(v => v.category === currentCategory);
    filteredVideos = data;
    displayVideos(filteredVideos);
}

function filterCategory(cat) {
    currentCategory = cat;
    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active-category'));
    event.target.classList.add('active-category');
    applyFilters();
}

function searchVideos() { applyFilters(); }

function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
        events: { 'onStateChange': (e) => { if(e.data === YT.PlayerState.ENDED) playNext(); } }
    });
}

function playVideoModal(index) {
    currentVideoIndex = index;
    const v = filteredVideos[index];
    const videoId = v.link.split('v=')[1] || v.link.split('/').pop();
    document.getElementById('modal-player').style.display = 'flex';
    player.loadVideoById(videoId);
}

function playNext() {
    currentVideoIndex++;
    if(currentVideoIndex < filteredVideos.length) playVideoModal(currentVideoIndex);
}

function closePlayer() {
    document.getElementById('modal-player').style.display = 'none';
    player.stopVideo();
}

function toggleTheme() { document.body.classList.toggle('light'); }
function showLoader(show) { document.getElementById('loader').style.display = show ? 'block' : 'none'; }

window.addEventListener('scroll', () => {
    document.getElementById('back-to-top').classList.toggle('show', window.scrollY > 300);
});

// Start
loadAllChannels();
</script>
</body>
</html>
